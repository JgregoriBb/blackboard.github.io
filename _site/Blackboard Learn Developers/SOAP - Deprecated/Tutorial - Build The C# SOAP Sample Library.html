<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:100,200,300,400,500,600,700,800,900&subset=latin,latin-ext'
        rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic,700italic'
        rel='stylesheet' type='text/css'/>
    <link href="https://developer.blackboard.com/assets/portal/menu-styles.css" rel='stylesheet' type='text/css' />
    <link href="https://developer.blackboard.com/assets/portal/main-styles.css" rel="stylesheet" type="text/css" />
    <link href="https://developer.blackboard.com/assets/portal/styles_ultra.css" rel="stylesheet" type="text/css" />
    <link href="https://developer.blackboard.com/assets/portal/dev-portal.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/styles.css" rel="stylesheet" type="text/css" />

    <title></title>
    
    <link rel="shortcut icon" type="image/x-icon" href='https://developer.blackboard.com/assets/portal/favicon.ico'>
    <script>
        /* Set the width of the side navigation to 250px */
        function openNav() {
            document.getElementById("mySidenav").style.width = "500px";
            document.getElementById("main").style.marginLeft = "500px";
            document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
        }

        /* Set the width of the side navigation to 0 */
        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
            document.getElementById("main").style.marginLeft = "0";
            document.body.style.backgroundColor = "white";
        }
    </script>
    <script>
      /* Loop through all dropdown buttons to toggle between hiding and showing its dropdown content - This allows the user to have multiple dropdowns without any conflict */
      var dropdown = document.getElementsByClassName("dropdown-btn");
      var i;
      
      for (i = 0; i < dropdown.length; i++) {
        dropdown[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var dropdownContent = this.nextElementSibling;
        if (dropdownContent.style.display === "block") {
        dropdownContent.style.display = "none";
        } else {
        dropdownContent.style.display = "block";
        }
        });
      }
    </script>
    <link type="application/atom+xml" rel="alternate" href="/feed.xml" />
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:locale" content="en_US" />
<script type="application/ld+json">
{"@type":"WebPage","url":"/Blackboard%20Learn%20Developers/SOAP%20-%20Deprecated/Tutorial%20-%20Build%20The%20C%23%20SOAP%20Sample%20Library.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <div id='top-content'>
    <div id="header" class='header-min-width'>
        <div id="header-logos">
            <div id="header-logos-left-container" class='inline-box'>
                <a id="bb-home-logo-link" href="http://www.blackboard.com" target="_blank"><img class="bb-home-logo-image" src="https://developer.blackboard.com/assets/images/bb_logo_subpages.png" alt="Blackboard"/></a>
            </div>
            <div id="header-logos-right-container" class='inline-box'>
                
                    <a href="Contact.html" class="header-section-link">Contact Us</a>
                
                    <a href="https://community.blackboard.com/developers" class="header-section-link">Community</a>
                
                    <a href="https://developer.blackboard.com" class="header-section-link">Developer Portal</a>
                
                    <a href="BECOME%20AN%20OFFICIAL%20BLACKBOARD%20PARTNER!.html" class="header-section-link">Become a Partner</a>
                
                    <a href="/Get%20Involved.html" class="header-section-link">Get Involved</a>
                
            </div>
            <br class="clearBoth"/>
        </div>
            
        <br />
        <div class="wrap">
            <div id="subhead-section" class="subhead-icon-header-interaction">
                <h1 style="color: white;">Developer Documentation</h1>
            </div>
        </div>
    </div>
</div>
    <nav style='background-color: black;'>
  
    <a href="/" class="header-section-link">Home</a>
  
    <a href="/Blackboard%20Learn%20Developers/Integrate%20with%20Blackboard%20Learn.html" class="header-section-link">Learn</a>
  
    <a href="/Blackboard%20Collaborate%20Developers/Getting%20Started%20With%20The%20Blackboard%20Collaborate%20REST%20APIs.html" class="header-section-link">Collab</a>
  
    <a href="/Blackboard%20ConnectTxt%20Developers/Blackboard%20ConnectTxt%20Developer%20Documentation.html" class="header-section-link">ConnectTxt</a>
  
    <a href="/Blackboard%20Mobile%20Developers/Blackboard%20App%20for%20Students%20Launch%20Schema.html" class="header-section-link">Mobile</a>
  
    <a href="/Blackboard%20OpenLMS%20Developers/Blackboard%20Open%20LMS%20Approved%20Plugin%20Program%20(MAP).html" class="header-section-link">OpenLMS</a>
  
    <a href="/Developer%20Version%20of%20Blackboard%20Applications/What%20is%20a%20DVBA%3F.html" class="header-section-link">DVBA</a>
  
    <a href="/Standards/Welcome%20To%20Standards.html" class="header-section-link">Standards</a>
  
</nav>
    <section>
      <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a><br>
    
        <ul>
            
                    <li><a href="/Blackboard%20Learn%20Developers/Integrate%20with%20Blackboard%20Learn.html" class="header-section-link" >Learn</a></li>
                    
            
                    <li><a href="/Blackboard%20Learn%20Developers/REST/Getting%20Started%20With%20REST.html" class="header-section-link" >REST</a></li>
                    
            
                    <li><a href="/Blackboard%20Learn%20Developers/B2s/Getting%20Started%20With%20Building%20Blocks.html" class="header-section-link" >B2s</a></li>
                    
            
                    <li><a href="/Blackboard%20Learn%20Developers/SOAP%20-%20Deprecated/SOAP-to-REST%20Migration%20Mapping.html" class="header-section-link" >SOAP - Deprecated</a></li>
                    
                        <ul>
                            
                                <li><a href="/Blackboard%20Learn%20Developers/SOAP%20-%20Deprecated/Blackboard%20Learn%20SOAP%20Web%20Services.html" class="header-section-link" >About</a></li>
                                
                            
                                <li><a href="/Blackboard%20Learn%20Developers/SOAP%20-%20Deprecated/Examples%20-%20SOAP%20Web%20Services.html" class="header-section-link" >Examples</a></li>
                                
                            
                                <li><a href="/Blackboard%20Learn%20Developers/SOAP%20-%20Deprecated/Tutorials%20-%20SOAP%20Web%20Services.html" class="header-section-link" >Tutorials</a></li>
                                
                                    <ul>
                                        
                                            <li><a href="/Blackboard%20Learn%20Developers/SOAP%20-%20Deprecated/Tutorial%20-%20Build%20The%20C%23%20SOAP%20Sample%20Library.html" class="header-section-link" >Build C# Library</a></li>
                                        
                                            <li><a href="/Blackboard%20Learn%20Developers/SOAP%20-%20Deprecated/Tutorial%20-%20Build%20The%20C%23%20SOAP%20Sample%20Client.html" class="header-section-link" >Build C# Client</a></li>
                                        
                                            <li><a href="/Blackboard%20Learn%20Developers/SOAP%20-%20Deprecated/Build%20Java%20Client%20Library.html" class="header-section-link" >Build Java Library</a></li>
                                        
                                    </ul>
                                
                            
                        </ul>
                
            
        </ul>
    
        
</div>
      
<!-- Add all page content inside this div if you want the side nav to push page content to the right (not used if you only want the sidenav to sit on top of the page -->
<div id="main">
    <!-- Use any element to open the sidenav -->
    <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776;</span>

    <h1 id="tutorial-build-the-c-soap-sample-library">Tutorial: Build The C# SOAP Sample Library</h1>
<p><em>Author: Scott Hurrey</em><br />
<em>Categories: [‘Getting Started’, ‘SOAP Web Services’, ‘Tutorials’]</em><br />
<em>Tags: [‘web services’, ‘soap’, ‘c#’, ‘tutorial’, ‘blackboard learn’, ‘sample code’, ‘sample client library’, ‘developer’]</em></p>
<hr />

<p>The first step to building the .NET Web Services sample desktop application is
to build the library that handles the communication between that client and
Blackboard Learn. This library can also be used from within Microsoft™ Visual
Studio® to build custom applications, without having to build the
communication protocols. If you choose to build your own, you have access to
all of the code used herein.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>Microsoft™ <a href="https://www.microsoft.com/downloads/details.aspx%3FFamilyID%3D1ba1f631-c3e7-420a-bc1e-ef18bab66122%26DisplayLang%3Den">Web Services Extensions 2.0 Service Pack 3</a></li>
  <li><a href="About%20Web%20Services%20Sample%20Code.html">Client.zip</a> archive from the Blackboard Learn User Interface</li>
  <li>Web Services are <a href="https://help.blackboard.com/en-us/Learn/9.1_2014_04/Administrator/070_Server_Management_and_Integrations/System_Integration/Integration_Development/030_Web_Services">Available and Discoverable</a></li>
</ul>

<h2 id="assumptions">Assumptions</h2>

<ul>
  <li>This sample was written based on instructions for Microsoft™ Visual Studio® 2010 Express Edition. There is sample code specific to several versions of Visual Studio, so some steps may vary slightly. The most fluid item is the location of wsdl.exe.</li>
  <li>This seems to change depending upon the version of Microsoft™Windows® and the version of Visual Studio installed. The path to this file is required to generate the sample code used to build this library.</li>
  <li>That said, there is no known restriction as to which version of Microsoft Visual Studio you use. Using a version other than the versions that Blackboard supplies specific solutions for may require additional configuration changes to build the software.</li>
</ul>

<h2 id="build-it">Build It</h2>

<p>The sample code must be built from the command line. To access the command
line in Microsoft Windows, click on the ‘Start’ menu, click run, type .html and
click ok. Once you are at the command prompt, navigate to the dotnetclient
sub-directory where you unzipped the client.zip file.</p>

<p>In this directory, you will see a file called sampleGenClient..html. Edit this
file in your favorite text editor. When this script is executed, it will reach
out to your Blackboard instance and retrieve the wsdl for each of the
available web services in order to generate the code. This requires access to
the wsdl.exe executable that is part of the Microsoft Visual Studio
Installation. This is set in the sampleGenClient..html file.</p>

<p>Locate the line in the file that reads set DOTNETBIN= and set it to the
appropriate path. Do not include wsdl.exe in the path. This will be appended
by the script. This file may be located in several locations depending upon
the version of Visual Studio and Windows. You might find this file in the
following locations.</p>

<table>
  <thead>
    <tr>
      <th>OS</th>
      <th>Application</th>
      <th>WSDL.exe Location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Windows 7</td>
      <td>Visual Studio 2010 Express</td>
      <td>C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin</td>
    </tr>
    <tr>
      <td>Windows Server 2008 R2</td>
      <td>Visual Studio 2010 Express</td>
      <td>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin</td>
    </tr>
  </tbody>
</table>

<p>Once this edit has been made, save the file. Now from the command line, and in
the dotnetclient directory, type the following:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    sampleGenClient..html http://&lt;blackboard learn domain&gt;
</code></pre></div></div>

<p>WARNING: <em>You will see error messages similar to the one below. You can safely
ignore these messages.</em></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    Schema validation warning: Schema item 'element' named 'getServerVersion' from namespace 'http://util.ws.blackboard' is invalid. Namespace 'http://ws.platform.blackboard/xsd' is not available to be referenced in this schema. Schema validation warning: Schema item 'element' named 'getServerVersionResponse' from namespace 'http://util.ws.blackboard' is invalid. Namespace 'http://ws.platform.blackboard/xsd' is not available to be referenced in this schema. Schema validation warning: Schema item 'element' named ‘getDataSourcesResponse' from namespace 'http://util.ws.blackboard' is invalid. Namespace 'http://util.ws.blackboard/xsd' is not available to be referenced in this schema. Schema validation warning: Schema item 'element' named 'checkEntitlement' from namespace 'http://util.ws.blackboard' is invalid. Namespace 'http://ws.platform.blackboard/xsd' is not available to be referenced in this schema. Warning: Schema could not be validated. Class generation may fail or may produce incorrect results. Writing file 'C:\Users\username\Blackboard\Developer Tools\Web Services\dotnetclient\BbWsClient\gen\UtilWS.cs'.
</code></pre></div></div>

<p>Once the sample code has been generated, the next step is to build the code
into a re-usable library. To do this, you must first open Microsoft Visual
Studio. Once the application is open, select <strong><em>File &gt; Open</em></strong> from the menu
and navigate to and open the …/dotnetclient/BbWsClient/BbWsClient2010.sln
file.</p>

<p>If you are going to use this code in a production environment, you will need
to add code to handle load balanced environments. The best way to do this is
to modify the WebserviceWrapper.cs file to add a CookieContainer to each
initialize call.</p>

<p>For example, the initAnnoucement(UsernameToken userToken) method looks like
the following:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    announcement = new AnnouncementWS();  
    announcement.Url = baseUrl + "/Announcement.WS";   
    announcement.RequestSoapContext.Security.Tokens.Add(userToken);  
</code></pre></div></div>

<p>Simply modify the method as illustrated below to enable the cookie container.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    announcement = new AnnouncementWS();   
    announcement.CookieContainer = new System.Net.CookieContainer();  //HANDLE STICKY COOKIES   
    announcement.Url = baseUrl + "/Announcement.WS";   
    announcement.RequestSoapContext.Security.Tokens.Add(userToken);
</code></pre></div></div>

<p>You must make this change to all of the init<WebService> methods you plan to
implement.</WebService></p>

<p>Now simply build the project. To do this, right-click the BbWsClient2010
project in the Solution Explorer and select Build from the contextual menu.
This will create the Dynamic Link Library (.dll) file as either
…/dotnetclient/BbWsClient/bin/Debug/BbWsClient.dll or
../dotnetclient/BbWsClient/bin/Release/BbWsClient.dll.</p>

<p>The .dll file can be imported into other projects, or, as you will see in
subsequent help topics, can be added to in order to create custom
applications.</p>

<h3 id="gradebookws-wsdl-and-learn-october-2014">Gradebook.WS WSDL and Learn October 2014</h3>

<p>A bug in the Blackboard Learn 9.1 October 2014 release with the WSDL for
gradebook.ws causes the code generation to fail when trying to ingest the this
WSDL.</p>

<p>For more information and workarounds for this bug, see the Behind the
Blackboard article <a href="https://blackboard.secure.force.com/btbb_articleview?id=kA370000000H5Fc">Gradebook.WS wsdl not Able to be Consumed due to Invalid
RuntimeException Declaration</a>.</p>

<p>If you follow workaround 1, simply change the initial gradebookWS call:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    url = url_header + 'Gradebook.WS?wsdl'
</code></pre></div></div>

<p>with this:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    url = 'file:///Users/username/wsdl/Gradebook.xml'
</code></pre></div></div>

<p>Just be sure to replace my absolute path to the absolute path on your file
system.</p>

<p>If you follow workaround 2, the code should work as-is.</p>


</div>
    </section>
  </body>
</html>