<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:100,200,300,400,500,600,700,800,900&subset=latin,latin-ext'
        rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic,700italic'
        rel='stylesheet' type='text/css'/>
    <link href="https://developer.blackboard.com/assets/portal/menu-styles.css" rel='stylesheet' type='text/css' />
    <link href="https://developer.blackboard.com/assets/portal/main-styles.css" rel="stylesheet" type="text/css" />
    <link href="https://developer.blackboard.com/assets/portal/styles_ultra.css" rel="stylesheet" type="text/css" />
    <link href="https://developer.blackboard.com/assets/portal/dev-portal.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/styles.css" rel="stylesheet" type="text/css" />

    <title></title>
    
    <link rel="shortcut icon" type="image/x-icon" href='https://developer.blackboard.com/assets/portal/favicon.ico'>
    <script>
        /* Set the width of the side navigation to 250px */
        function openNav() {
            document.getElementById("mySidenav").style.width = "500px";
            document.getElementById("main").style.marginLeft = "500px";
            document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
        }

        /* Set the width of the side navigation to 0 */
        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
            document.getElementById("main").style.marginLeft = "0";
            document.body.style.backgroundColor = "white";
        }
    </script>
    <script>
      /* Loop through all dropdown buttons to toggle between hiding and showing its dropdown content - This allows the user to have multiple dropdowns without any conflict */
      var dropdown = document.getElementsByClassName("dropdown-btn");
      var i;
      
      for (i = 0; i < dropdown.length; i++) {
        dropdown[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var dropdownContent = this.nextElementSibling;
        if (dropdownContent.style.display === "block") {
        dropdownContent.style.display = "none";
        } else {
        dropdownContent.style.display = "block";
        }
        });
      }
    </script>
    <link type="application/atom+xml" rel="alternate" href="/feed.xml" />
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:locale" content="en_US" />
<script type="application/ld+json">
{"@type":"WebPage","url":"/Developer%20Version%20of%20Blackboard%20Applications/Solution%20to%20Unconnected%20sockets%20not%20implemented%20in%20a%20Q4%202015%20DVM.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <div id='top-content'>
    <div id="header" class='header-min-width'>
        <div id="header-logos">
            <div id="header-logos-left-container" class='inline-box'>
                <a id="bb-home-logo-link" href="http://www.blackboard.com" target="_blank"><img class="bb-home-logo-image" src="https://developer.blackboard.com/assets/images/bb_logo_subpages.png" alt="Blackboard"/></a>
            </div>
            <div id="header-logos-right-container" class='inline-box'>
                
                    <a href="Contact.html" class="header-section-link">Contact Us</a>
                
                    <a href="https://community.blackboard.com/developers" class="header-section-link">Community</a>
                
                    <a href="https://developer.blackboard.com" class="header-section-link">Developer Portal</a>
                
                    <a href="BECOME%20AN%20OFFICIAL%20BLACKBOARD%20PARTNER!.html" class="header-section-link">Become a Partner</a>
                
                    <a href="/Get%20Involved.html" class="header-section-link">Get Involved</a>
                
            </div>
            <br class="clearBoth"/>
        </div>
            
        <br />
        <div class="wrap">
            <div id="subhead-section" class="subhead-icon-header-interaction">
                <h1 style="color: white;">Developer Documentation</h1>
            </div>
        </div>
    </div>
</div>
    <nav style='background-color: black;'>
  
    <a href="/" class="header-section-link">Home</a>
  
    <a href="/Blackboard%20Learn%20Developers/Integrate%20with%20Blackboard%20Learn.html" class="header-section-link">Learn</a>
  
    <a href="/Blackboard%20Collaborate%20Developers/Getting%20Started%20With%20The%20Blackboard%20Collaborate%20REST%20APIs.html" class="header-section-link">Collab</a>
  
    <a href="/Blackboard%20ConnectTxt%20Developers/Blackboard%20ConnectTxt%20Developer%20Documentation.html" class="header-section-link">ConnectTxt</a>
  
    <a href="/Blackboard%20Mobile%20Developers/Blackboard%20App%20for%20Students%20Launch%20Schema.html" class="header-section-link">Mobile</a>
  
    <a href="/Blackboard%20OpenLMS%20Developers/Blackboard%20Open%20LMS%20Approved%20Plugin%20Program%20(MAP).html" class="header-section-link">OpenLMS</a>
  
    <a href="/Developer%20Version%20of%20Blackboard%20Applications/What%20is%20a%20DVBA%3F.html" class="header-section-link">DVBA</a>
  
    <a href="/Standards/Welcome%20To%20Standards.html" class="header-section-link">Standards</a>
  
</nav>
    <section>
      <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a><br>
    
        <a href="What%20is%20a%20DVBA%3F.html" class="header-section-link" >DVBA Home</a><br />
    
        <a href="Using%20the%20Blackboard%20Learn%20AMI%20for%20REST%20and%20LTI%20Development.html" class="header-section-link" >Developer AMI</a><br />
    
        <a href="Developer%20Virtual%20Machine%20-%20DVM.html" class="header-section-link" >DVM</a><br />
    
</div>
      
<!-- Add all page content inside this div if you want the side nav to push page content to the right (not used if you only want the sidenav to sit on top of the page -->
<div id="main">
    <!-- Use any element to open the sidenav -->
    <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776;</span>

    <h1 id="solution-to-unconnected-sockets-not-implemented-in-a-q4-2015-dvm">Solution to Unconnected sockets not implemented in a Q4 2015 DVM</h1>
<p><em>Author: Mark Bykerk Kauffman</em><br />
<em>Categories: [‘Building Blocks’, ‘Examples’]</em><br />
<em>Tags: [‘dvm’, ‘patch’, ‘developer’]</em></p>
<hr />

<p>You’ve run into the “Unconnected sockets not implemented error” in a Q4 2015
Developer Virtual Machine. What can you do? This article will help. There is a
patch that fixes the error, LRNSI-21817, but the Q4 2015 DVM is built from a
slightly different version of Learn than what went GA. Hence an attempt to
apply the patch will fail, telling you that the patch isn’t meant for the
version of Learn you are running. What I did, and it worked for me, is to
download the patch, unzip it, modify the bbpatch.mf file so that the DVM
version is included in the list of compatible versions, re-build the patch,
and apply it. Because there are no database changes involved, just inserting a
couple of class files, BbPatch.sh ran without a hitch with this modified file.
Following are the details. Hope this helps another developer!</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vagrant up
$ vagrant ssh
# yum install zip
# yum install unzip
# cd /usr/local/blackboard/tools/admin
# ./ServiceController.sh services.stop
# ./BbPatch.sh download LRNSI-21817
# mkdir tmp
# mv ./LRNSI-21817-1.bbp tmp/
# cd tmp
# mkdir zipdir
# cp LRNSI-21817-1.bbp zipdir/LRNSI-21817-1.zip
# cd zipdir
# unzip LRNSI-21817-1.zip
# rm LRNSI-21817-1.zip
# vi bbpatch.mf
  
  **Change: ** Compatible: 9.1.201510/9.1.201510.1171621-9.1.201510.1171621 
  **To: **Compatible: 9.1.201510/9.1.201510.1171621-9.1.201510.1171702 

#  zip -r foo.zip .
# mv foo.zip LRNSI-21817_4DVM.bbp
# cp LRNSI-21817_4DVM.bbp ../..
# cd ../..
[root@localhost admin]# ./BbPatch.sh apply ./LRNSI-21817_4DVM.bbp
[root@localhost admin]# ./BbPatch.sh apply LRNSI-21817_4DVM.bbp

Blackboard Patch Client version 2.2.7
apply
Blackboard Learn, Version 9.1.201510.1171702, /usr/local/blackboard
Package repository /usr/local/blackboard/content/bbpatch/repository, remote [h
ttps://bbprepo.blackboard.com/content/repositories/packages](https://community
.blackboard.com/external-link.jspa?url=https%3A//bbprepo.blackboard.com/
content/repositories/packages)

Identifier : LRNSI-21817

Description : Fixing issue with B2s that rely on outbound encrypted data

Resolves bug(s) : LRN-106224

Date built : 2016-01-24 18:51:49 +0000

Compatible with : 9.1.201510.1171621 - 9.1.201510.1171702

Platform : Any

Operations :

Jar operations:

File systemlib/bb-tomcatboot.jar:

Update blackboard/tomcat/startup/StrictSSLSocketFactory.class

File systemlib/bb-tomcat-bootstrap.jar:

Add/Update blackboard/tomcat/startup/StrictSSLSocketFactory.class

Package deployment guidance:

Package scope: Host-only. Apply/rollback on all hosts

Downtime requirement: Current host. Stop application before apply and rollback
on the current host

Validating package LRNSI-21817 for apply...

Retrieving Blackboard Learn service status...

File systemlib/bb-tomcatboot.jar is on the Tomcat classpath. Including file
copy operation to apps/tomcat/lib/bb-tomcatboot.jar.

File systemlib/bb-tomcat-bootstrap.jar is on the Tomcat classpath. Including
file copy operation to apps/tomcat/lib/bb-tomcat-bootstrap.jar.

Performing pre-apply validation...

Are you sure you want to perform this operation? [Y/N]: Y

Applying package LRNSI-21817...

Preparing to update jar /usr/local/blackboard/systemlib/bb-tomcatboot.jar

Checking/extracting file
blackboard/tomcat/startup/StrictSSLSocketFactory.class

Performing jar update...

Copying bb-tomcatboot.jar to /usr/local/blackboard/apps/tomcat/lib/bb-
tomcatboot.jar

Preparing to update jar /usr/local/blackboard/systemlib/bb-tomcat-
bootstrap.jar

Checking/extracting file
blackboard/tomcat/startup/StrictSSLSocketFactory.class

Performing jar update...

Copying bb-tomcat-bootstrap.jar to /usr/local/blackboard/apps/tomcat/lib/bb-
tomcat-bootstrap.jar

Package LRNSI-21817 applied successfully.

[SUCCESS] Apply operation succeeded.
</code></pre></div></div>


</div>
    </section>
  </body>
</html>